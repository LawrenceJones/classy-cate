mixin course-heading
  h2.course-heading
    | {{ course.cid }}: {{ course.name }}
    i.fa.fa-info-circle.small

mixin notes-panel
  .panel.panel-default.notes-panel
    .panel-heading
      h3.panel-title Notes
    table.table.table-hover.panel-body.course-notes.resource-list
      tbody
        tr(course-note='note.link' ng-repeat='note in course.notes')
          td.number {{ note.number }}
          td.icon
            i(mime-type-icon='note.restype')
          td.title
            a {{ note.title }}
          td.time.small.visible-lg by {{ note.owner }} on {{ note.time.format() }}
          td.discussions
            discussions-badge(discussions='note.discussions')

mixin grades-panel
  .panel.panel-default.grades-panel
    .panel-heading
      h3.panel-title Grades
    table.table.table-hover.panel-body
      tbody
        tr(ng-repeat='grade in course.grades')
          td {{ grade.number }}
          td
            i(mime-type-icon='grade.type')
          td {{ grade.title }}
          td.small {{ grade.submission.format() }}
          td {{ grade.grade }}

mixin exercises-panel
  .panel.panel-default.exercises-panel
    .panel-heading 
      h3.panel-title Exercises
    table.table.table-hover.panel-body.course-exercises.resource-list
      tbody(course-exercise ng-repeat='exercise in course.exercises')
        tr.ex-title
          td.number {{ exercise.number }}
          td.icon
            i(mime-type-icon='exercise.type')
          td.title
            a {{ exercise.title }}
          td.time.small.visible-lg {{ exercise.start.format() + ' - ' + exercise.end.format() }}
          td
            discussions-badge(discussions='exercise.discussions')
        tr.ex-given.hide(ng-repeat='given in exercise.givens')
          td.number
          td.icon
            i(mime-type-icon='given.type')
          td.title
            a {{ given.title }}
          td.time.small.visible-lg {{ given.time.format() }}
          td 

mixin discussions-panel
  .panel.panel-default.discussions-panel
    .panel-heading
      h3.panel-title Discussions
    table.table.table-hover.panel-body
      tbody
        tr(ng-repeat='discussion in course.discussions')
          td {{ discussion.title }}
          td {{ discussion.author }}
          td {{ discussion.time.format() }}
          td
            span.badge {{ discussion.posts }}


.row
  .col-md-12
    +course-heading
.row
  .col-md-12
    .lead {{ course.describeTerms() }}
.row
  .col-md-6
    +notes-panel
    +grades-panel
  .col-md-6
    +exercises-panel
    +discussions-panel

